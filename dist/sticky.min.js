!function(){"use strict";var t=angular.module("sticky",[]);t.directive("sticky",function(){function t(t,e,o){function s(){if(y.offsetWidth=h.offsetWidth,c(),i(),x){var t=window.getComputedStyle(h.parentElement,null),o=h.parentElement.offsetWidth-t.getPropertyValue("padding-right").replace("px","")-t.getPropertyValue("padding-left").replace("px","");e.css("width",o+"px")}}function n(){g.off("scroll",i),g.off("resize",s),m&&w.removeClass(m),$&&$.remove()}function i(){var t,e,s,n;if(!d||P("("+d+")").matches||P(d).matches)if("top"===W?(n=window.pageYOffset||v.scrollTop,t=n-(v.clientTop||0),e=L===!0?t>=k&&T>=t:t>=k):(s=window.pageYOffset+window.innerHeight,e=k>=s),!e||p(o.stickLimit)||x){if(!e&&x){var i,f,l;f=[k,T],l=r(f,t),l==k?i="top":l==T&&(i="bottom"),c(i,t)}}else a()}function r(t,e){var o,s=0,n=1e3;for(s in t){var i=Math.abs(e-t[s]);n>i&&(n=i,o=t[s])}return o}function a(){var t,o;if(t=e[0].getBoundingClientRect(),o=t.left,y.offsetWidth=h.offsetWidth,x=!0,m&&w.addClass(m),u&&e.addClass(u),e.css("width",h.offsetWidth+"px").css("position","fixed").css(W,H+"px").css("left",o).css("margin-top",0),"bottom"===W&&e.css("margin-bottom",0),I){console.log("use placeholder!"),$=angular.element("<div>");var s=e[0].offsetHeight;$.css("height",s+"px"),e.after($)}}function c(t){e.attr("style",e.initialStyle),x=!1,m&&w.removeClass(m),u&&e.removeClass(u),"top"==t?e.css("width","").css("top",y.top).css("position",y.position).css("left",y.cssLeft).css("margin-top",y.marginTop):"bottom"==t&&L===!0&&e.css("width","").css("top","").css("bottom",0).css("position","absolute").css("left",y.cssLeft).css("margin-top",y.marginTop).css("margin-bottom",y.marginBottom),$&&$.remove()}function f(t){var e=0;if(t.offsetParent)do e+=t.offsetTop,t=t.offsetParent;while(t);return e}function l(t){return t.offsetTop+t.clientHeight}function p(t){if(console.log("true"===t),"true"===t){var e=h.offsetHeight,o=window.innerHeight;return o-(e+parseInt(H))<0}return!1}var d,u,m,h,g,w,v,y,b,C,x,k,T,H,W,L,M,P,I,$;switch(C=!1,x=!1,P=window.matchMedia,g=angular.element(window),w=angular.element(document.body),h=e[0],v=document.documentElement,d=o.mediaQuery||!1,u=o.stickyClass||"",m=o.bodyClass||"",I=void 0==o.useplaceholder?!1:!0,b=e.attr("style"),H="string"==typeof o.offset?parseInt(o.offset.replace(/px;?/,"")):0,W="string"==typeof o.anchor?o.anchor.toLowerCase().trim():"top",L="string"==typeof o.confine?o.confine.toLowerCase().trim():"false",L="true"===L,y={top:e.css("top"),width:e.css("width"),position:e.css("position"),marginTop:e.css("margin-top"),cssLeft:e.css("left")},W){case"top":case"bottom":break;default:console.log("Unknown anchor "+W+", defaulting to top"),W="top"}g.on("scroll",i),g.on("resize",t.$apply.bind(t,s)),t.$on("$destroy",n),M=f(h),t.$watch(function(){return x?M:M="top"===W?f(h):l(h)},function(t,o){if(t!==o||"undefined"==typeof k){k=t-H,L&&e.parent().css({position:"relative"});var s=e.parent()[0];console.log(s.offsetHeight);var n=parseInt(s.offsetHeight),r=parseInt(e.css("margin-bottom").replace(/px;?/,""))||0;T=n-(h.offsetTop+h.offsetHeight)+H+r,i()}})}return{restrict:"A",link:t}}),window.matchMedia=window.matchMedia||function(){var t="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(t),function(){return{matches:!0}}}()}();
