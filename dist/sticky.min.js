!function(){"use strict";var t=angular.module("sticky",[]);t.directive("sticky",["$window",function(t){return{restrict:"A",scope:{disabled:"=disabledSticky"},link:function(e,n,i){function o(){v=e.calculateStickyContentInitialDimensions(),D&&(n[0].getBoundingClientRect().height||(S=e.$watch(function(){return n.height()},function(t){t>0&&(v=e.calculateStickyContentInitialDimensions(),E||S())})))}function s(e){var n=e.closest("sticky-scroll");return 1===n.length?n.get(0):t}function c(e){return"true"===e?t.innerHeight-(n[0].offsetHeight+parseInt($))<0:!1}function r(t,e,n){var i="top",o=Math.abs(t-e),s=Math.abs(t-n);return o>s&&(i="bottom"),i}function a(t){n.attr("style",B),b=!1,L.removeClass(w),n.removeClass(k),n.removeClass(k),n.addClass(C),"top"===t?n.css("z-index",10).css("width",n[0].offsetWidth).css("top",v.top).css("position",v.position).css("left",v.cssLeft).css("margin-top",v.marginTop).css("height",v.height):"bottom"===t&&z===!0&&n.css("z-index",10).css("width",n[0].offsetWidth).css("top","").css("bottom",0).css("position","absolute").css("left",v.cssLeft).css("margin-top",v.marginTop).css("margin-bottom",v.marginBottom).css("height",v.height),m&&t===W&&m.remove()}function l(t){b=!0,v.offsetWidth=n[0].offsetWidth,L.addClass(w),n.removeClass(C),n.addClass(k),H&&t===W&&(m=angular.element("<div>"),m.css("height",n[0].offsetHeight+"px"),n.after(m)),n.css("z-index","10").css("width",n[0].offsetWidth+"px").css("position","fixed").css("left",n.css("left").replace("px","")+"px").css(W,$+u(x)+"px").css("margin-top",0),"bottom"===W&&n.css("margin-bottom",0)}function u(t){var e=0;return t.getBoundingClientRect&&(e=t.getBoundingClientRect().top),e}function f(){var t;return t="undefined"!=typeof x.scrollTop?x.scrollTop:"undefined"!=typeof x.pageYOffset?x.pageYOffset:document.documentElement.scrollTop}function d(){var e;return e=T[0]instanceof HTMLElement?t.getComputedStyle(T[0],null).getPropertyValue("height").replace(/px;?/,""):t.innerHeight,parseInt(e)||0}function p(){var e=i.mediaQuery||!1,n=t.matchMedia;return e&&!(n("("+e+")").matches||n(e).matches)}var h,g,m,y,S,v,b=!1,k=i.stickyClass||"",C=i.unstickyClass||"",w=i.bodyClass||"",x=s(n),I=angular.element(t),T=angular.element(x),L=angular.element(document.body),H="false"!==i.usePlaceholder,W="bottom"===i.anchor?"bottom":"top",z="true"===i.confine,D=void 0!==i.isStickyLayoutDeferred?"true"===i.isStickyLayoutDeferred:!1,E=void 0!==i.isStickyLayoutWatched?"true"===i.isStickyLayoutWatched:!0,M=n.css("position"),$=i.offset?parseInt(i.offset.replace(/px;?/,"")):0,B=n.attr("style")||"",O=function(){T.on("scroll",R),I.on("resize",e.$apply.bind(e,A)),o(),e.$on("$destroy",U)},R=function(){if((e.disabled===!0||p())&&b)return a();var t,o=f()-(document.documentElement.clientTop||0);t="top"===W?z===!0?o>h&&g>=o:o>h:h>=o;var s=r(o,h,g);!t||c(i.stickLimit)||b?!t&&b?a(s,o):z&&!t&&"bottom"===s&&"absolute"!==n.css("position")&&(y=u(n[0]),a(s,o)):l(s)},U=function(){T.off("scroll",R),I.off("resize",A),L.removeClass(w),m&&m.remove()},A=function(){a(W),R()},P=function(){return e.disabled===!0?a():"top"===W?(y||u(n[0]))-u(x)+f():u(n[0])-d()+n[0].offsetHeight+f()},Y=function(t,e){if((t!==e||"undefined"==typeof h)&&!b){h=t-$,z&&n.parent().css({position:"relative"});var i=n.parent()[0],o=parseInt(i.offsetHeight)-(H?0:n[0].offsetHeight),s=parseInt(n.css("margin-bottom").replace(/px;?/,""))||0,c=u(n[0]),r=u(i),a=u(x),l=c-a,d=r+o-c;g=l+d-n[0].offsetHeight-s-$+ +f(),R()}};e.$watch(P,Y),e.getElement=function(){return n},e.getScrollbar=function(){return x},e.getInitialCSS=function(){return v},e.getAnchor=function(){return W},e.isSticking=function(){return b},e.getOriginalInitialCSS=function(){return Q},e.processUnStickElement=function(t){a(t)},e.processCheckIfShouldStick=function(){R()},e.calculateStickyContentInitialDimensions=function(){return{zIndex:n.css("z-index"),top:n.css("top"),position:M,marginTop:n.css("margin-top"),marginBottom:n.css("margin-bottom"),cssLeft:n.css("left"),height:n.css("height")}},e.updateStickyContentUpdateDimensions=function(t,e){t&&e&&(v.width=t+"px",v.height=e+"px")};var Q=e.calculateStickyContentInitialDimensions();O()},controller:["$scope","$window",function(t,e){this.resetLayout=function(n,i){function o(){"top"===r&&(s===e?e.scrollTo(0,0):s.scrollTop>0&&(s.scrollTop=0))}var s=t.getScrollbar(),c=t.getInitialCSS(),r=t.getAnchor();if(t.isSticking()&&(t.processUnStickElement(r),t.processCheckIfShouldStick()),t.getElement().css({width:"",height:"",position:"",top:"",zIndex:""}),c.position=t.getOriginalInitialCSS().position,delete c.offsetWidth,void 0===n&&void 0===i){var a=t.getElement().get(0).getBoundingClientRect();n=a.width,i=a.height}t.updateStickyContentUpdateDimensions(n,i),o()},this.getScrollbar=function(){return t.getScrollbar()}}]}}]),window.matchMedia=window.matchMedia||function(){var t="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(t),function(){return{matches:!0}}}()}();
